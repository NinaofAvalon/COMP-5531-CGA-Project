-- database users
CREATE TABLE users (
  id int(11) NOT NULL AUTO_INCREMENT,
  username varchar(100) NOT NULL,
  password varchar(100) NOT NULL,
  email varchar(100) DEFAULT NULL,
  PRIMARY KEY (id),
  UNIQUE KEY username (username)
  -- accept null value but no duplicate
) ENGINE=InnoDB AUTO_INCREMENT=1006 DEFAULT CHARSET=latin1;

-- students
CREATE TABLE  student  (
   student_id  int(11) NOT NULL AUTO_INCREMENT,
   user_id int(11),
   first_name  varchar(100) NOT NULL,
   last_name varchar(100) NOT NULL,
   birth_date date,
   phone int(11),
   enroll_course_id  int(11) NOT NULL,
   group_id  int(11) NOT NULL,
  PRIMARY KEY (student_id),
  FOREIGN KEY (user_id) REFERENCES users (id),
  FOREIGN KEY (enroll_course_id) REFERENCES course (id)
 ) ENGINE=InnoDB AUTO_INCREMENT=1001 DEFAULT CHARSET=latin1;

 -- instructor
CREATE TABLE  instructor  (
   id  int(11) NOT NULL,
   user_id int(11),
   first_name  varchar(100) DEFAULT NULL,
   last_name varchar(100) DEFAULT NULL,
   birth_date date,
   phone int(11),
   email varchar(100),
   instructor_course  varchar(100) DEFAULT NULL,
  PRIMARY KEY ( id ),
  FOREIGN KEY (user_id) REFERENCES users (id)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

-- TA
CREATE TABLE  TA  (
   id  int(11) NOT NULL,
   user_id int(11),
   first_name  varchar(100) DEFAULT NULL,
   last_name varchar(100) DEFAULT NULL,
   birth_date date,
   phone int(11),
   email varchar(100),
  PRIMARY KEY ( id ),
  FOREIGN KEY (user_id) REFERENCES users (id)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

-- course
CREATE TABLE  course  (
   id  int(11) NOT NULL AUTO_INCREMENT,
   course_name  varchar(100) NOT NULL,
   instructor_id  int(11) NOT NULL,
   course_section  varchar(100) NOT NULL,
   course_term  varchar(100) NOT NULL,
  PRIMARY KEY ( id ),
  KEY  course_fk  (instructor_id ),
  FOREIGN KEY ( instructor_id ) REFERENCES  instructor  ( id )
) ENGINE=InnoDB AUTO_INCREMENT=1036 DEFAULT CHARSET=latin1;

-- course_ta
CREATE TABLE  course_ta  (
   id  int(11) NOT NULL AUTO_INCREMENT,
   course_id  int(11) NOT NULL,
   ta_id int(11) NOT NULL,
  PRIMARY KEY ( id )
) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=latin1;



-- group
CREATE TABLE class_group (
   group_id  int(11) NOT NULL,
   group_name  varchar(100) DEFAULT NULL,
   leader_id  int(11) NOT NULL,
  PRIMARY KEY ( group_id ),
  FOREIGN KEY ( leader_id ) REFERENCES  student  ( student_id )
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

 create table chat(
  id int(11) NOT NULL auto_increment,
  message text NOT NULL,
  username varchar(100) not null,
  date varchar(100),
  group_id int(11),
  PRIMARY KEY  (id),
  foreign key (username) references users (username)
) ENGINE=InnoDB AUTO_INCREMENT=1001 DEFAULT CHARSET=latin1;

create table discussion_board(
id int(11) not null auto_increment,
title varchar(100) not null,
creator varchar(100) not null,
content text not null,
creation_date varchar(100),
primary key (id),
foreign key (creator) references users (username)
)ENGINE=InnoDB AUTO_INCREMENT=1001 DEFAULT CHARSET=latin1;

create table replies (
id int(11) not null auto_increment,
creator varchar(100) not null,
content text not null,
creation_date varchar(100),
post_id int(11),
primary key (id),
foreign key (post_id) references discussion_board (id)
)ENGINE=InnoDB AUTO_INCREMENT=1001 DEFAULT CHARSET=latin1;

create table events (
id int(11) not null auto_increment,
event_title varchar(100) not null,
start_time varchar(100) not null,
end_time varchar(100) not null,
description text not null,
student_id int(11),
primary key (id),
foreign key (student_id) references student (student_id)
) ENGINE=InnoDB AUTO_INCREMENT=1001 DEFAULT CHARSET=latin1;
